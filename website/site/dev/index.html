<html>
<head>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>
    <script src="js/aws-cognito-sdk.min.js"></script>
    <script src="js/amazon-cognito-identity.min.js"></script>
    <script>
        var idToken = null;

        function checkLogin() {
            var url_string = window.location.href;
            var url = new URL(url_string);
            idToken = url.searchParams.get("id_token");
            if (idToken != null) {
                document.getElementById("welcomeMsg").innerHTML = "signed in";
                auth();
            }
        }

        function auth() {
            AWS.config.update({
            region: "eu-west-1",
            //  endpoint: 'http://localhost:8000', // If you use dynamoDB installed locally
                accessKeyId: "(ACCESS_KEY_ID)",
                secretAccessKey: "(SECRET_ACCESS_KEY)"

            });

            //AWS.config.credentials = new AWS.CognitoIdentityCredentials({
            //        IdentityPoolId : '(IDENTITY POOL ID)',
            //        Logins : {
            //        "cognito-idp.(AWS_REGION).amazonaws.com/(POOL_ID)": idToken
            //        }
            //    });
        }

        function readItem() {

            var docClient = new AWS.DynamoDB.DocumentClient();

            var params = {
                TableName: "main-website-table",
                Key:{
                    "Data1": "Interesting",// Partition Key
                }
            };
            docClient.get(params, function(err, data) {
                if (err) {
                    document.getElementById('textarea').innerHTML = "Unable to read item: " + "\n" + JSON.stringify(err, undefined, 2);
                } else {
                    document.getElementById('textarea').innerHTML = "GetItem succeeded: " + "\n" + JSON.stringify(data, undefined, 2);
                }
            });
        }
    </script>
</head>
<body onload="checkLogin">

    <div id="welcomeMsg"></div><br>
    <h1>DynamoDB Data Demo</h1>
    <input type="button" value="Read data from DynamoDB" onclick="readItem();" />
    <br><br>

    <textarea readonly id="textarea" style="width:400px; height:600px"></textarea>

</body>

</html>